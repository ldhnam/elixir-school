<!DOCTYPE html>

<html lang="en-us">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link href="http://gmpg.org/xfn/11" rel="profile">

  <meta name="description" content="Leçons sur le langage de programmation Elixir">
  <meta name="author" content="Sean Callan">

  <meta property="og:url" content="https://elixirschool.com/fr/lessons/basics/mix/">
  <meta property="og:site_name" content="ElixirSchool">
  <meta property="og:title" content="
  Mix &middot; Elixir School

">
  <meta property="og:description" content="Leçons sur le langage de programmation Elixir">
  <meta property="og:image" content="https://elixirschool.com/assets/fb_share.jpg">

  <title>
    
  Mix &middot; Elixir School


  </title>

  <!-- CSS -->
  <link type="text/css" rel="stylesheet" href="/assets/app.css">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
  analytics.load("C0p07Sw9j7mZnycKDCgPOAyqJR5hhyoQ");
  analytics.page()
  }}();
  </script>

</head>


  
  <body class="theme-custom-purple ">
    <a id="github_ribbon" href="https://github.com/doomspork/elixir_school"><img src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>

    
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Elixir School
        </a>
      </h1>
      <p class="lead">Leçons sur le langage de programmation Elixir</p>
    </div>

    <nav class="sidebar-nav">
      
      
        
        
        
        
          <div class="sidebar-nav-group basics">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-down "></i>
              <span>Bases</span>
            </div>
            <div class="sidebar-nav-list" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/fr/lessons/basics/basics/">Bases</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/fr/lessons/basics/collections/">Collections</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson " href="/fr/lessons/basics/enum/">Enum</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson " href="/fr/lessons/basics/pattern-matching/">Pattern Matching</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/fr/lessons/basics/control-structures/">Structures de Contrôle</a>
                </div>
              
                <div class="sidebar-nav-item">
                  6. <a class="sidebar-lesson " href="/fr/lessons/basics/functions/">Fonctions</a>
                </div>
              
                <div class="sidebar-nav-item">
                  7. <a class="sidebar-lesson " href="/fr/lessons/basics/pipe-operator/">L'opérateur Pipe</a>
                </div>
              
                <div class="sidebar-nav-item">
                  9. <a class="sidebar-lesson  active" href="/fr/lessons/basics/mix/">Mix</a>
                </div>
              
                <div class="sidebar-nav-item">
                  10. <a class="sidebar-lesson " href="/fr/lessons/basics/sigils/">Sigils</a>
                </div>
              
                <div class="sidebar-nav-item">
                  12. <a class="sidebar-lesson " href="/fr/lessons/basics/testing/">Tests</a>
                </div>
              
                <div class="sidebar-nav-item">
                  15. <a class="sidebar-lesson " href="/fr/lessons/basics/mix-tasks/">Tâches Mix Personnalisées</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
      
        
        
        
        
      
        
        
        
        
      
    </nav>

    <p>
      

      
        <a href=" /lessons/basics/mix/ ">en</a>
      
        <a href=" /jp/lessons/basics/mix/ ">jp</a>
      
        <a href=" /cn/lessons/basics/mix/ ">cn</a>
      
        <a href=" /es/lessons/basics/mix/ ">es</a>
      
        <a href=" /pt/lessons/basics/mix/ ">pt</a>
      
        <a href=" /vi/lessons/basics/mix/ ">vi</a>
      
        <a href=" /ru/lessons/basics/mix/ ">ru</a>
      
        <a href=" /sk/lessons/basics/mix/ ">sk</a>
      
        <a href=" /fr/lessons/basics/mix/ ">fr</a>
      
        <a href=" /gr/lessons/basics/mix/ ">gr</a>
      
        <a href=" /it/lessons/basics/mix/ ">it</a>
      
        <a href=" /pl/lessons/basics/mix/ ">pl</a>
      
        <a href=" /my/lessons/basics/mix/ ">my</a>
      
        <a href=" /no/lessons/basics/mix/ ">no</a>
      
        <a href=" /ko/lessons/basics/mix/ ">ko</a>
      
        <a href=" /id/lessons/basics/mix/ ">id</a>
      
        <a href=" /uk/lessons/basics/mix/ ">uk</a>
      
        <a href=" /tr/lessons/basics/mix/ ">tr</a>
      
        <a href=" /bg/lessons/basics/mix/ ">bg</a>
      
        <a href=" /de/lessons/basics/mix/ ">de</a>
      
        <a href=" /bn/lessons/basics/mix/ ">bn</a>
      
    </p>

    <p>&copy; 2017 <a href="https://github.com/doomspork">Sean Callan</a></p>
  </div>
</div>


    <div class="content container">
      <div class="page">
  <h1 class="page-title">Mix</h1>
  <p>Avant de plonger dans les profondeurs d’Elixir, nous devons d’abord apprendre mix. Si vous êtes familier avec Ruby, mix est l’équivalent de Bundler, Rubygems, et Rake combinés. C’est une part primordiale de tout projet Elixir et dans cette leçon nous allons explorer quelques une de ses fonctionnalités. Pour voir tout ce que mix permet de faire, lancez <code class="highlighter-rouge">mix help</code>.</p>

<p>Jusqu’ici nous avons travaillé exclusivement dans <code class="highlighter-rouge">iex</code>, ce qui a ses limitations. Dans le cas d’un projet réel nous avons besoin de séparer notre code dans différents fichiers, et mix est là pour nous aider à les gérer efficacement.</p>

<h2>Table des matières</h2>
<div id="toc"></div>

<h2 id="nouveau-projet">Nouveau projet</h2>

<p>Mix rend facile la création d’un nouveau projet avec la commande <code class="highlighter-rouge">mix new</code>. Cela génére la structure de dossiers de notre projet et crée les fichiers de base. C’est tout simple, allons-y:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mix new example
</code></pre>
</div>

<p>On peut lire dans les messages de sortie que mix a créé notre dossier et un certain nombre de fichiers:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">*</span> creating README.md
<span class="k">*</span> creating .gitignore
<span class="k">*</span> creating mix.exs
<span class="k">*</span> creating config
<span class="k">*</span> creating config/config.exs
<span class="k">*</span> creating lib
<span class="k">*</span> creating lib/example.ex
<span class="k">*</span> creating <span class="nb">test</span>
<span class="k">*</span> creating <span class="nb">test</span>/test_helper.exs
<span class="k">*</span> creating <span class="nb">test</span>/example_test.exs
</code></pre>
</div>

<p>Dans cette leçon nous allons nous intéresser au fichier <code class="highlighter-rouge">mix.exs</code>, où on configure notre application, ses dépendances, son environnement et sa version. Ouvrez le fichier dans votre éditeur préféré, vous devriez voir quelque chose comme ça (les commentaires ont été supprimés pour plus de concision):</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Example</span><span class="o">.</span><span class="no">Mixfile</span> <span class="k">do</span>
  <span class="kn">use</span> <span class="no">Mix</span><span class="o">.</span><span class="no">Project</span>

  <span class="k">def</span> <span class="n">project</span> <span class="k">do</span>
    <span class="p">[</span><span class="ss">app:</span> <span class="ss">:example</span><span class="p">,</span>
     <span class="ss">version:</span> <span class="sd">"</span><span class="s2">0.0.1"</span><span class="p">,</span>
     <span class="ss">elixir:</span> <span class="sd">"</span><span class="s2">~&gt; 1.0"</span><span class="p">,</span>
     <span class="ss">build_embedded:</span> <span class="no">Mix</span><span class="o">.</span><span class="n">env</span> <span class="o">==</span> <span class="ss">:prod</span><span class="p">,</span>
     <span class="ss">start_permanent:</span> <span class="no">Mix</span><span class="o">.</span><span class="n">env</span> <span class="o">==</span> <span class="ss">:prod</span><span class="p">,</span>
     <span class="ss">deps:</span> <span class="n">deps</span><span class="p">]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="n">application</span> <span class="k">do</span>
    <span class="p">[</span><span class="ss">applications:</span> <span class="p">[</span><span class="ss">:logger</span><span class="p">]]</span>
  <span class="k">end</span>

  <span class="k">defp</span> <span class="n">deps</span> <span class="k">do</span>
    <span class="p">[]</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>La première section qui nous intéresse est <code class="highlighter-rouge">project</code>. On y définit le nom de notre application (<code class="highlighter-rouge">app</code>), on spécifie la version (<code class="highlighter-rouge">version</code>), la version d’Elixir (<code class="highlighter-rouge">elixir</code>), et enfin nos dépendances (<code class="highlighter-rouge">deps</code>).</p>

<p>La section <code class="highlighter-rouge">application</code> est utilisée pendant la génération de notre fichier d’application, que nous verrons par la suite.</p>

<h2 id="a-nameinteractifaintractif"><a name="interactif"></a>Intéractif</h2>

<p>Il peut être nécessaire d’utiliser <code class="highlighter-rouge">iex</code> dans le contexte de notre application. Heureusement, mix rend ça facile. On peut commencer une nouvelle session <code class="highlighter-rouge">iex</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>iex -S mix
</code></pre>
</div>

<p>Démarrer <code class="highlighter-rouge">iex</code> de cette façon va charger notre application et ses dépendances dans le contexte d’exécution.</p>

<h2 id="compilation">Compilation</h2>

<p>Mix est malin et ne compile que ce qui est nécessaire, mais il faut tout de même lancer la compilation de votre projet explicitement. Dans cette section nous verrons comment compiler notre projet et ce que fait la compilation.</p>

<p>Pour compiler un projet mix nous avons simplement besoin de lancer <code class="highlighter-rouge">mix compile</code> dans notre répertoire de base:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mix compile
</code></pre>
</div>

<p>Il n’y a pas grand chose dans notre projet donc la sortie n’est pas très passionnante, mais elle devrait terminer avec succès:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Compiled lib/example.ex
Generated example app
</code></pre>
</div>

<p>Quand on compile un projet, mix crée un dossier <code class="highlighter-rouge">_build</code> pour nos artefacts. Si on regarde dans ce dossier <code class="highlighter-rouge">_build</code> on y trouve notre applicaton compilée <code class="highlighter-rouge">example.app</code>.</p>

<h2 id="a-namegestion-des-dependancesagestion-des-dpendances"><a name="gestion-des-dependances"></a>Gestion des dépendances</h2>

<p>Notre projet n’a aucune dépendance mais en aura bientôt, donc allons-y et voyons comment définir des dépendances et les obtenir.</p>

<p>Pour ajouter une nouvelle dépendance, on la définit dans notre <code class="highlighter-rouge">mix.exs</code> dans la section <code class="highlighter-rouge">deps</code>. La liste des dépendances est constituée de tuples de deux valeurs requises et une optionnelle: le nom du paquet (un atome), la version (une chaîne de caractères), et d’éventuelles options.</p>

<p>Pour cet exemple, regardons les dépendances d’un projet existant, comme <a href="https://github.com/doomspork/phoenix_slim">phoenix_slim</a>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="n">deps</span> <span class="k">do</span>
  <span class="p">[{</span><span class="ss">:phoenix</span><span class="p">,</span> <span class="sd">"</span><span class="s2">~&gt; 1.1 or ~&gt; 1.2"</span><span class="p">},</span>
   <span class="p">{</span><span class="ss">:phoenix_html</span><span class="p">,</span> <span class="sd">"</span><span class="s2">~&gt; 2.3"</span><span class="p">},</span>
   <span class="p">{</span><span class="ss">:cowboy</span><span class="p">,</span> <span class="sd">"</span><span class="s2">~&gt; 1.0"</span><span class="p">,</span> <span class="ss">only:</span> <span class="p">[</span><span class="ss">:dev</span><span class="p">,</span> <span class="ss">:test</span><span class="p">]},</span>
   <span class="p">{</span><span class="ss">:slime</span><span class="p">,</span> <span class="sd">"</span><span class="s2">~&gt; 0.14"</span><span class="p">}]</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Comme vous l’avez probablement compris, la dépendance à <code class="highlighter-rouge">cowboy</code> est nécessaire uniquement pendant les phases de développement et de test.</p>

<p>Une fois nos dépendances définies, il reste une dernière étape, les obtenir. C’est similaire à <code class="highlighter-rouge">bundle install</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mix deps.get
</code></pre>
</div>

<p>Et voilà ! Nous avons défini et obtenu nos dépendances. On est maintenant prêt à en ajouter quand cela sera nécessaire.</p>

<h2 id="environnements">Environnements</h2>

<p>Mix, tout comme Bundler, supportes différents environnements. De base, mix fonctionne avec trois environnements:</p>

<ul>
  <li><code class="highlighter-rouge">:dev</code> — L’environnement par défaut.</li>
  <li><code class="highlighter-rouge">:test</code> — Utilisé par <code class="highlighter-rouge">mix test</code>. Couvert plus loin dans la leçon suivante.</li>
  <li><code class="highlighter-rouge">:prod</code> — Utilisé quand l’application fonctionne en production.</li>
</ul>

<p>L’environnement courant peut être accédé en utilisant <code class="highlighter-rouge">Mix.env</code>. Il peut être modifié via la variable d’environnemnt <code class="highlighter-rouge">MIX_ENV</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nv">MIX_ENV</span><span class="o">=</span>prod mix compile
</code></pre>
</div>


  

<hr />
<h3 id="social">
  
    Partager cette page
  
</h3>
<div class="social__container">
  <div class="social__item">
    <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https://elixirschool.com/fr/lessons/basics/mix/&title=Mix&summary=description&source=https://elixirschool.com" class="social__icon--linkedin"><i class="icon--linkedin"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://twitter.com/intent/tweet?url=https://elixirschool.com/fr/lessons/basics/mix/&via=elixirschool&text=ElixirSchool: Mix&hashtags=learnelixir%2Celixirlang&" class="social__icon--twitter"><i class="icon--twitter"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://plus.google.com/share?url=https://elixirschool.com/fr/lessons/basics/mix/" class="social__icon--googleplus"><i class="icon--googleplus"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://elixirschool.com/fr/lessons/basics/mix/" class="social__icon--facebook"><i class="icon--facebook"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.pinterest.com/pin/create/link/?url=https://elixirschool.com/fr/lessons/basics/mix/&media=https://elixirschool.com/assets/fb_share.jpg&description=ElixirSchool: Mix" class="social__icon--pinterest"><i class="icon--pinterest"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.evernote.com/noteit.action?url=https://elixirschool.com/fr/lessons/basics/mix/&title=ElixirSchool: Mix&suggestTags=elixir,programming" class="social__icon--evernote"><i class="icon--evernote"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://vk.com/share.php?url=https://elixirschool.com/fr/lessons/basics/mix/&title=ElixirSchool: Mix&description=Check out 'Mix' on ElixirSchool" class="social__icon--vk" style="margin-left: 2px;"><i class="icon--vk"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="mailto:?&subject=ElixirSchool: Mix&body=Check out 'Mix' on ElixirSchool%0D%0A%0D%0Ahttps://elixirschool.com/fr/lessons/basics/mix/" class="social__icon--email"><i class="icon--email"></i></a>
  </div>
  <div class="social__item">
    <a href="javascript:window.print()" class="social__icon--print"><i class="icon--print"></i></a>
  </div>
</div>
</div>
    </div>
  <script type="text/javascript" src="/assets/app.js"></script>
  </body>
</html>
