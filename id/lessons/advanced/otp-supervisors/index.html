<!DOCTYPE html>

<html lang="en-us">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link href="http://gmpg.org/xfn/11" rel="profile">

  <meta name="description" content="Pelajaran mengenai bahasa pemrograman Elixir">
  <meta name="author" content="Sean Callan">

  <meta property="og:url" content="https://elixirschool.com/id/lessons/advanced/otp-supervisors/">
  <meta property="og:site_name" content="ElixirSchool">
  <meta property="og:title" content="
  OTP Supervisors &middot; Elixir School

">
  <meta property="og:description" content="Pelajaran mengenai bahasa pemrograman Elixir">
  <meta property="og:image" content="https://elixirschool.com/assets/fb_share.jpg">

  <title>
    
  OTP Supervisors &middot; Elixir School


  </title>

  <!-- CSS -->
  <link type="text/css" rel="stylesheet" href="/assets/app.css">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
  analytics.load("C0p07Sw9j7mZnycKDCgPOAyqJR5hhyoQ");
  analytics.page()
  }}();
  </script>

</head>


  
  <body class="theme-custom-purple ">
    <a id="github_ribbon" href="https://github.com/doomspork/elixir_school"><img src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>

    
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Elixir School
        </a>
      </h1>
      <p class="lead">Pelajaran mengenai bahasa pemrograman Elixir</p>
    </div>

    <nav class="sidebar-nav">
      
      
        
        
        
        
          <div class="sidebar-nav-group basics">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-right "></i>
              <span>Dasar</span>
            </div>
            <div class="sidebar-nav-list"  style="display: none;" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/id/lessons/basics/basics/">Dasar</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/id/lessons/basics/collections/">Koleksi</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson " href="/id/lessons/basics/enum/">Enum</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson " href="/id/lessons/basics/pattern-matching/">Pencocokan Pola</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/id/lessons/basics/control-structures/">Struktur Kendali</a>
                </div>
              
                <div class="sidebar-nav-item">
                  6. <a class="sidebar-lesson " href="/id/lessons/basics/functions/">Fungsi</a>
                </div>
              
                <div class="sidebar-nav-item">
                  7. <a class="sidebar-lesson " href="/id/lessons/basics/pipe-operator/">Operator pipe</a>
                </div>
              
                <div class="sidebar-nav-item">
                  8. <a class="sidebar-lesson " href="/id/lessons/basics/modules/">Composition</a>
                </div>
              
                <div class="sidebar-nav-item">
                  9. <a class="sidebar-lesson " href="/id/lessons/basics/mix/">Mix</a>
                </div>
              
                <div class="sidebar-nav-item">
                  10. <a class="sidebar-lesson " href="/id/lessons/basics/sigils/">Sigil</a>
                </div>
              
                <div class="sidebar-nav-item">
                  11. <a class="sidebar-lesson " href="/id/lessons/basics/documentation/">Documentation</a>
                </div>
              
                <div class="sidebar-nav-item">
                  12. <a class="sidebar-lesson " href="/id/lessons/basics/testing/">Testing</a>
                </div>
              
                <div class="sidebar-nav-item">
                  13. <a class="sidebar-lesson " href="/id/lessons/basics/comprehensions/">Comprehensions</a>
                </div>
              
                <div class="sidebar-nav-item">
                  14. <a class="sidebar-lesson " href="/id/lessons/basics/strings/">Strings</a>
                </div>
              
                <div class="sidebar-nav-item">
                  15. <a class="sidebar-lesson " href="/id/lessons/basics/mix-tasks/">Custom Mix Tasks</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
          <div class="sidebar-nav-group advanced">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-down "></i>
              <span>Lanjutan</span>
            </div>
            <div class="sidebar-nav-list" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/id/lessons/advanced/erlang/">Interoperabilitas dengan Erlang</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/id/lessons/advanced/error-handling/">Penanganan Error</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson " href="/id/lessons/advanced/escripts/">Executables</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson " href="/id/lessons/advanced/concurrency/">Concurrency</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/id/lessons/advanced/otp-concurrency/">OTP Concurrency</a>
                </div>
              
                <div class="sidebar-nav-item">
                  6. <a class="sidebar-lesson  active" href="/id/lessons/advanced/otp-supervisors/">OTP Supervisors</a>
                </div>
              
                <div class="sidebar-nav-item">
                  7. <a class="sidebar-lesson " href="/id/lessons/advanced/metaprogramming/">Metaprogramming</a>
                </div>
              
                <div class="sidebar-nav-item">
                  8. <a class="sidebar-lesson " href="/id/lessons/advanced/umbrella-projects/">Umbrella Projects</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
          <div class="sidebar-nav-group specifics">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-right "></i>
              <span>Khusus</span>
            </div>
            <div class="sidebar-nav-list"  style="display: none;" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/id/lessons/specifics/plug/">Plug</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/id/lessons/specifics/ecto/">Ecto</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson " href="/id/lessons/specifics/eex/">Embedded Elixir (EEx)</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson " href="/id/lessons/specifics/ets/">Erlang Term Storage (ETS)</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/id/lessons/specifics/mnesia/">Mnesia</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
      
    </nav>

    <p>
      

      
        <a href=" /lessons/advanced/otp-supervisors/ ">en</a>
      
        <a href=" /jp/lessons/advanced/otp-supervisors/ ">jp</a>
      
        <a href=" /cn/lessons/advanced/otp-supervisors/ ">cn</a>
      
        <a href=" /es/lessons/advanced/otp-supervisors/ ">es</a>
      
        <a href=" /pt/lessons/advanced/otp-supervisors/ ">pt</a>
      
        <a href=" /vi/lessons/advanced/otp-supervisors/ ">vi</a>
      
        <a href=" /ru/lessons/advanced/otp-supervisors/ ">ru</a>
      
        <a href=" /sk/lessons/advanced/otp-supervisors/ ">sk</a>
      
        <a href=" /fr/lessons/advanced/otp-supervisors/ ">fr</a>
      
        <a href=" /gr/lessons/advanced/otp-supervisors/ ">gr</a>
      
        <a href=" /it/lessons/advanced/otp-supervisors/ ">it</a>
      
        <a href=" /pl/lessons/advanced/otp-supervisors/ ">pl</a>
      
        <a href=" /my/lessons/advanced/otp-supervisors/ ">my</a>
      
        <a href=" /no/lessons/advanced/otp-supervisors/ ">no</a>
      
        <a href=" /ko/lessons/advanced/otp-supervisors/ ">ko</a>
      
        <a href=" /id/lessons/advanced/otp-supervisors/ ">id</a>
      
        <a href=" /uk/lessons/advanced/otp-supervisors/ ">uk</a>
      
        <a href=" /tr/lessons/advanced/otp-supervisors/ ">tr</a>
      
        <a href=" /bg/lessons/advanced/otp-supervisors/ ">bg</a>
      
        <a href=" /de/lessons/advanced/otp-supervisors/ ">de</a>
      
        <a href=" /bn/lessons/advanced/otp-supervisors/ ">bn</a>
      
    </p>

    <p>&copy; 2017 <a href="https://github.com/doomspork">Sean Callan</a></p>
  </div>
</div>


    <div class="content container">
      <div class="page">
  <h1 class="page-title">OTP Supervisors</h1>
  <p>Supervisor adalah proses khusus yang memiliki satu peran: memonitor proses lain. Supervisor ini memungkinkan kita membuat aplikasi yang toleran-kegagalan (fault-tolerant) dengan secara otomatis menjalankan ulang proses anak (child process) jika proses anak itu fail (mengalami kegagalan).</p>

<h2>Daftar Isi</h2>
<div id="toc"></div>

<h2 id="konfigurasi">Konfigurasi</h2>

<p>Inti Supervisor adalah fungsi <code class="highlighter-rouge">Supervisor.start_link/2</code>.  Di samping menjalankan supervisor kita dan anak-anaknya, fungsi ini juga memungkinkan kita mendefinisikan strategi yang digunakan supervisor kita untuk mengatur proses-proses anak.</p>

<p>Proses-proses anak didefinisikan menggunakan sebuah list dan fungsi <code class="highlighter-rouge">worker/3</code> yang kita import dari <code class="highlighter-rouge">Supervisor.Spec</code>.  Fungsi <code class="highlighter-rouge">worker/3</code> ini menerima sebuah modul, argumen, dan sekumpulang opsi.  Di dalamnya <code class="highlighter-rouge">worker/3</code> memanggil <code class="highlighter-rouge">start_link/3</code> dengan argumen-argumen kita dalam inisialisasi.</p>

<p>Menggunakan SimpleQueue dari pelajaran <a href="../../advanced/otp-concurrency">OTP Concurrency</a> mari kita mulai:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="no">Supervisor</span><span class="o">.</span><span class="no">Spec</span>

<span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
  <span class="n">worker</span><span class="p">(</span><span class="no">SimpleQueue</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[</span><span class="ss">name:</span> <span class="no">SimpleQueue</span><span class="p">])</span>
<span class="p">]</span>

<span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">pid</span><span class="p">}</span> <span class="o">=</span> <span class="no">Supervisor</span><span class="o">.</span><span class="n">start_link</span><span class="p">(</span><span class="n">children</span><span class="p">,</span> <span class="ss">strategy:</span> <span class="ss">:one_for_one</span><span class="p">)</span>
</code></pre>
</div>

<p>Jika proses kita crash atau diterminasi Supervisor kita akan secara otomatis menjalankan ulang seakan tidak ada yang terjadi.</p>

<h3 id="strategi">Strategi</h3>

<p>Saat ini ada empat strategi penjalanan ulang yang tersedia untuk supervisor:</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">:one_for_one</code> - Hanya jalankan ulang proses anak yang gagal.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">:one_for_all</code> - Jalankan ulang semua proses anak jika satu gagal.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">:rest_for_one</code> - Jalankan ulang proses yang gagal dan semua proses yang dijalankan setelahnya.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">:simple_one_for_one</code> - Pilihan terbaik untuk proses anak yang dipasangkan secara dinamis (dynamically attached). Supervisor hanya bisa mengurus satu anak.</p>
  </li>
</ul>

<h3 id="nesting">Nesting</h3>

<p>Di samping proses pekerja (worker process), kita juga bisa mensupervisi supervisor lain untuk membuat sebuah pohon supervisor (supervisor tree).  Satu-satunya perbedaan adalah menggantikan <code class="highlighter-rouge">worker/3</code> dengan <code class="highlighter-rouge">supervisor/3</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="no">Supervisor</span><span class="o">.</span><span class="no">Spec</span>

<span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
  <span class="n">supervisor</span><span class="p">(</span><span class="no">ExampleApp</span><span class="o">.</span><span class="no">ConnectionSupervisor</span><span class="p">,</span> <span class="p">[[</span><span class="ss">name:</span> <span class="no">ExampleApp</span><span class="o">.</span><span class="no">ConnectionSupervisor</span><span class="p">]]),</span>
  <span class="n">worker</span><span class="p">(</span><span class="no">SimpleQueue</span><span class="p">,</span> <span class="p">[[],</span> <span class="p">[</span><span class="ss">name:</span> <span class="no">SimpleQueue</span><span class="p">]])</span>
<span class="p">]</span>

<span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">pid</span><span class="p">}</span> <span class="o">=</span> <span class="no">Supervisor</span><span class="o">.</span><span class="n">start_link</span><span class="p">(</span><span class="n">children</span><span class="p">,</span> <span class="ss">strategy:</span> <span class="ss">:one_for_one</span><span class="p">)</span>
</code></pre>
</div>

<h2 id="supervisor-untuk-task">Supervisor untuk Task</h2>

<p>Task punya Supervisornya sendiri, <code class="highlighter-rouge">Task.Supervisor</code>.  Didesain untuk task yang dibuat secara dinamis, supervisor ini menggunakan <code class="highlighter-rouge">:simple_one_for_one</code> di dalamnya.</p>

<h3 id="setup">Setup</h3>

<p>Menggunakan <code class="highlighter-rouge">Task.Supervisor</code> tidak beda dengan supervisor lain:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="no">Supervisor</span><span class="o">.</span><span class="no">Spec</span>

<span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
  <span class="n">supervisor</span><span class="p">(</span><span class="no">Task</span><span class="o">.</span><span class="no">Supervisor</span><span class="p">,</span> <span class="p">[[</span><span class="ss">name:</span> <span class="no">ExampleApp</span><span class="o">.</span><span class="no">TaskSupervisor</span><span class="p">]]),</span>
<span class="p">]</span>

<span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">pid</span><span class="p">}</span> <span class="o">=</span> <span class="no">Supervisor</span><span class="o">.</span><span class="n">start_link</span><span class="p">(</span><span class="n">children</span><span class="p">,</span> <span class="ss">strategy:</span> <span class="ss">:one_for_one</span><span class="p">)</span>
</code></pre>
</div>

<h3 id="task-yang-disupervisi">Task yang Disupervisi</h3>

<p>Setelah supervisor dijalankan kita bisa menggunakan fungsi <code class="highlighter-rouge">start_child/2</code> untuk membuat task yang disupervisi:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">pid</span><span class="p">}</span> <span class="o">=</span> <span class="no">Task</span><span class="o">.</span><span class="no">Supervisor</span><span class="o">.</span><span class="n">start_child</span><span class="p">(</span><span class="no">ExampleApp</span><span class="o">.</span><span class="no">TaskSupervisor</span><span class="p">,</span> <span class="k">fn</span> <span class="o">-&gt;</span> <span class="n">background_work</span> <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>Jika task kita crash sebelum waktunya, task itu akan dijalankan ulang (restart) untuk kita.  Ini khususnya bisa berguna ketika bekerja dengan koneksi yang datang atau memproses pekerjaan di belakang layar (background work).</p>


  

<hr />
<h3 id="social">
  
    Bagikan Halaman Ini
  
</h3>
<div class="social__container">
  <div class="social__item">
    <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https://elixirschool.com/id/lessons/advanced/otp-supervisors/&title=OTP Supervisors&summary=description&source=https://elixirschool.com" class="social__icon--linkedin"><i class="icon--linkedin"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://twitter.com/intent/tweet?url=https://elixirschool.com/id/lessons/advanced/otp-supervisors/&via=elixirschool&text=ElixirSchool: OTP Supervisors&hashtags=learnelixir%2Celixirlang&" class="social__icon--twitter"><i class="icon--twitter"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://plus.google.com/share?url=https://elixirschool.com/id/lessons/advanced/otp-supervisors/" class="social__icon--googleplus"><i class="icon--googleplus"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://elixirschool.com/id/lessons/advanced/otp-supervisors/" class="social__icon--facebook"><i class="icon--facebook"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.pinterest.com/pin/create/link/?url=https://elixirschool.com/id/lessons/advanced/otp-supervisors/&media=https://elixirschool.com/assets/fb_share.jpg&description=ElixirSchool: OTP Supervisors" class="social__icon--pinterest"><i class="icon--pinterest"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.evernote.com/noteit.action?url=https://elixirschool.com/id/lessons/advanced/otp-supervisors/&title=ElixirSchool: OTP Supervisors&suggestTags=elixir,programming" class="social__icon--evernote"><i class="icon--evernote"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://vk.com/share.php?url=https://elixirschool.com/id/lessons/advanced/otp-supervisors/&title=ElixirSchool: OTP Supervisors&description=Check out 'OTP Supervisors' on ElixirSchool" class="social__icon--vk" style="margin-left: 2px;"><i class="icon--vk"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="mailto:?&subject=ElixirSchool: OTP Supervisors&body=Check out 'OTP Supervisors' on ElixirSchool%0D%0A%0D%0Ahttps://elixirschool.com/id/lessons/advanced/otp-supervisors/" class="social__icon--email"><i class="icon--email"></i></a>
  </div>
  <div class="social__item">
    <a href="javascript:window.print()" class="social__icon--print"><i class="icon--print"></i></a>
  </div>
</div>
</div>
    </div>
  <script type="text/javascript" src="/assets/app.js"></script>
  </body>
</html>
