<!DOCTYPE html>

<html lang="en-us">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link href="http://gmpg.org/xfn/11" rel="profile">

  <meta name="description" content="Μαθήματα προγραμματισμού της γλώσσας Elixir">
  <meta name="author" content="Sean Callan">

  <meta property="og:url" content="https://elixirschool.com/gr/lessons/specifics/ets/">
  <meta property="og:site_name" content="ElixirSchool">
  <meta property="og:title" content="
  Erlang Term Storage (ETS) &middot; Elixir School

">
  <meta property="og:description" content="Μαθήματα προγραμματισμού της γλώσσας Elixir">
  <meta property="og:image" content="https://elixirschool.com/assets/fb_share.jpg">

  <title>
    
  Erlang Term Storage (ETS) &middot; Elixir School


  </title>

  <!-- CSS -->
  <link type="text/css" rel="stylesheet" href="/assets/app.css">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
  analytics.load("C0p07Sw9j7mZnycKDCgPOAyqJR5hhyoQ");
  analytics.page()
  }}();
  </script>

</head>


  
  <body class="theme-custom-purple ">
    <a id="github_ribbon" href="https://github.com/doomspork/elixir_school"><img src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>

    
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Elixir School
        </a>
      </h1>
      <p class="lead">Μαθήματα προγραμματισμού της γλώσσας Elixir</p>
    </div>

    <nav class="sidebar-nav">
      
      
        
        
        
        
          <div class="sidebar-nav-group basics">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-right "></i>
              <span>Βασικά</span>
            </div>
            <div class="sidebar-nav-list"  style="display: none;" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/gr/lessons/basics/basics/">Βασικά</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/gr/lessons/basics/collections/">Συλλογές</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson " href="/gr/lessons/basics/enum/">Enum</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson " href="/gr/lessons/basics/pattern-matching/">Αντιπαραβολές Προτύπων</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/gr/lessons/basics/control-structures/">Δομές Ελέγχου</a>
                </div>
              
                <div class="sidebar-nav-item">
                  6. <a class="sidebar-lesson " href="/gr/lessons/basics/functions/">Συναρτήσεις</a>
                </div>
              
                <div class="sidebar-nav-item">
                  7. <a class="sidebar-lesson " href="/gr/lessons/basics/pipe-operator/">Τελεστής Σωλήνα</a>
                </div>
              
                <div class="sidebar-nav-item">
                  8. <a class="sidebar-lesson " href="/gr/lessons/basics/modules/">Ενότητες</a>
                </div>
              
                <div class="sidebar-nav-item">
                  9. <a class="sidebar-lesson " href="/gr/lessons/basics/mix/">Mix</a>
                </div>
              
                <div class="sidebar-nav-item">
                  10. <a class="sidebar-lesson " href="/gr/lessons/basics/sigils/">Σφραγίδες</a>
                </div>
              
                <div class="sidebar-nav-item">
                  11. <a class="sidebar-lesson " href="/gr/lessons/basics/documentation/">Τεκμηρίωση</a>
                </div>
              
                <div class="sidebar-nav-item">
                  12. <a class="sidebar-lesson " href="/gr/lessons/basics/testing/">Δοκιμές</a>
                </div>
              
                <div class="sidebar-nav-item">
                  13. <a class="sidebar-lesson " href="/gr/lessons/basics/comprehensions/">Ανάγνωση Λιστών</a>
                </div>
              
                <div class="sidebar-nav-item">
                  14. <a class="sidebar-lesson " href="/gr/lessons/basics/strings/">Αλφαριθμητικά</a>
                </div>
              
                <div class="sidebar-nav-item">
                  15. <a class="sidebar-lesson " href="/gr/lessons/basics/mix-tasks/">Ειδικές Εργασίες Mix</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
          <div class="sidebar-nav-group advanced">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-right "></i>
              <span>Προχωρημένα</span>
            </div>
            <div class="sidebar-nav-list"  style="display: none;" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/gr/lessons/advanced/erlang/">Διαλειτουργικότητα με την Erlang</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/gr/lessons/advanced/error-handling/">Διαχείριση Σφαλμάτων</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson " href="/gr/lessons/advanced/escripts/">Εκτελέσιμα</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson " href="/gr/lessons/advanced/concurrency/">Συγχρονισμός</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/gr/lessons/advanced/otp-concurrency/">Συγχρονισμός OTP</a>
                </div>
              
                <div class="sidebar-nav-item">
                  6. <a class="sidebar-lesson " href="/gr/lessons/advanced/otp-supervisors/">Επιτηρητές OTP</a>
                </div>
              
                <div class="sidebar-nav-item">
                  7. <a class="sidebar-lesson " href="/gr/lessons/advanced/metaprogramming/">Μεταπρογραμματισμός</a>
                </div>
              
                <div class="sidebar-nav-item">
                  8. <a class="sidebar-lesson " href="/gr/lessons/advanced/umbrella-projects/">Projects Ομπρέλας</a>
                </div>
              
                <div class="sidebar-nav-item">
                  9. <a class="sidebar-lesson " href="/gr/lessons/advanced/typespec/">Προδιαγραφές και τύποι</a>
                </div>
              
                <div class="sidebar-nav-item">
                  10. <a class="sidebar-lesson " href="/gr/lessons/advanced/behaviours/">Συμπεριφορές</a>
                </div>
              
                <div class="sidebar-nav-item">
                  11. <a class="sidebar-lesson " href="/gr/lessons/advanced/gen-stage/">GenStage</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
          <div class="sidebar-nav-group specifics">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-down "></i>
              <span>Ιδιαιτερότητες</span>
            </div>
            <div class="sidebar-nav-list" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/gr/lessons/specifics/plug/">Plug</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/gr/lessons/specifics/ecto/">Ecto</a>
                </div>
              
                <div class="sidebar-nav-item">
                  3. <a class="sidebar-lesson " href="/gr/lessons/specifics/eex/">Ένθετη Elixir (EEx)</a>
                </div>
              
                <div class="sidebar-nav-item">
                  4. <a class="sidebar-lesson  active" href="/gr/lessons/specifics/ets/">Erlang Term Storage (ETS)</a>
                </div>
              
                <div class="sidebar-nav-item">
                  5. <a class="sidebar-lesson " href="/gr/lessons/specifics/mnesia/">Mnesia</a>
                </div>
              
            </div>
          </div>
        
      
        
        
        
        
          <div class="sidebar-nav-group libraries">
            <div class="sidebar-nav-header">
              <i class="fa  fa-chevron-right "></i>
              <span>Βιβλιοθήκες</span>
            </div>
            <div class="sidebar-nav-list"  style="display: none;" >
              
                <div class="sidebar-nav-item">
                  1. <a class="sidebar-lesson " href="/gr/lessons/libraries/guardian/">Guardian (Βασικά)</a>
                </div>
              
                <div class="sidebar-nav-item">
                  2. <a class="sidebar-lesson " href="/gr/lessons/libraries/poolboy/">Poolboy</a>
                </div>
              
            </div>
          </div>
        
      
    </nav>

    <p>
      

      
        <a href=" /lessons/specifics/ets/ ">en</a>
      
        <a href=" /jp/lessons/specifics/ets/ ">jp</a>
      
        <a href=" /cn/lessons/specifics/ets/ ">cn</a>
      
        <a href=" /es/lessons/specifics/ets/ ">es</a>
      
        <a href=" /pt/lessons/specifics/ets/ ">pt</a>
      
        <a href=" /vi/lessons/specifics/ets/ ">vi</a>
      
        <a href=" /ru/lessons/specifics/ets/ ">ru</a>
      
        <a href=" /sk/lessons/specifics/ets/ ">sk</a>
      
        <a href=" /fr/lessons/specifics/ets/ ">fr</a>
      
        <a href=" /gr/lessons/specifics/ets/ ">gr</a>
      
        <a href=" /it/lessons/specifics/ets/ ">it</a>
      
        <a href=" /pl/lessons/specifics/ets/ ">pl</a>
      
        <a href=" /my/lessons/specifics/ets/ ">my</a>
      
        <a href=" /no/lessons/specifics/ets/ ">no</a>
      
        <a href=" /ko/lessons/specifics/ets/ ">ko</a>
      
        <a href=" /id/lessons/specifics/ets/ ">id</a>
      
        <a href=" /uk/lessons/specifics/ets/ ">uk</a>
      
        <a href=" /tr/lessons/specifics/ets/ ">tr</a>
      
        <a href=" /bg/lessons/specifics/ets/ ">bg</a>
      
        <a href=" /de/lessons/specifics/ets/ ">de</a>
      
        <a href=" /bn/lessons/specifics/ets/ ">bn</a>
      
    </p>

    <p>&copy; 2017 <a href="https://github.com/doomspork">Sean Callan</a></p>
  </div>
</div>


    <div class="content container">
      <div class="page">
  <h1 class="page-title">Erlang Term Storage (ETS)</h1>
  <p>Η Erlang Term Storage, γνωστό και ως ETS, είναι μια δυνατή μηχανή αποθήκευσης ενσωματωμένη στο OTP και διαθέσιμη για χρήση στην Elixir.  Σε αυτό το μάθημα θα δούμε πως να αλληλεπιδρούμε με την ETS και πως μπορεί να χρησιμοποιηθεί στις εφαρμογές μας.</p>

<h2>Πίνακας περιεχομένων</h2>
<div id="toc"></div>

<h2 id="section">Επισκόπηση</h2>

<p>Η ETS είναι μια προεγκατεστημένη ρωμαλέα αποθήκη μνήμης για αντικείμενα Elixir και Erlang .  Η ETS είναι ικανή για αποθήκευση πολύ μεγάλου όγκου δεδομένων και προσφέρει πρόσβαση στα δεδομένα σε σταθερό χρόνο.</p>

<p>Οι πίνακες στην ETS δημιουργούνται και ανήκουν σε ξεχωριστές διεργασίες.  Όταν μια διεργασία ιδιοκτήτης τερματίζεται, οι πίνακές της καταστρέφονται.  Εξ’ ορισμού η ETS περιορίζεται στους 1400 πίνακες ανά κόμβο.</p>

<h2 id="section-1">Δημιουργία Πινάκων</h2>

<p>Οι πίνακες δημιουργούνται με την <code class="highlighter-rouge">new/2</code>, η οποία δέχεται το όνομα πίνακα και ένα σετ επιλογών, και επιστρέφει ένα χαρακτηριστικό πίνακα το οποίο μπορεί να χρησιμοποιηθεί σε επόμενες εργασίες.</p>

<p>Για το παράδειγμά μας θα δημιουργήσουμε ένα πίνακα για να αποθηκεύσουμε και αναζητούμε χρήστες με το ψευδώνυμό τους:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="p">[</span><span class="ss">:set</span><span class="p">,</span> <span class="ss">:protected</span><span class="p">])</span>
<span class="m">8212</span>
</code></pre>
</div>

<p>Όπως οι GenServers, υπάρχει τρόπος να έχουμε πρόσβαση σε πίνακες ETS με το όνομα αντί του χαρακτηριστικού.  Για να το κάνουμε αυτό θα συμπεριλάβουμε την επιλογή <code class="highlighter-rouge">:named_table</code>.  Τότε μπορούμε να έχουμε πρόσβαση στον πίνακα κατευθείαν με το όνομα:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="p">[</span><span class="ss">:set</span><span class="p">,</span> <span class="ss">:protected</span><span class="p">,</span> <span class="ss">:named_table</span><span class="p">])</span>
<span class="ss">:user_lookup</span>
</code></pre>
</div>

<h3 id="section-2">Τύποι Πινάκων</h3>

<p>Υπάρχουν τέσσερισ τύποι πινάκων διαθέσιμοι στην ETS:</p>

<ul>
  <li><code class="highlighter-rouge">set</code> — Αυτός είναι ο προκαθορισμένος τύπος πίνακα.  Μια τιμή ανά κλειδί.  Τα κλειδιά είναι μοναδικά.</li>
  <li><code class="highlighter-rouge">ordered_set</code> — Παρόμοια με την <code class="highlighter-rouge">set</code> αλλά ταξινομημένη με τον ορισμό της Erlang / Elixir.  Είναι σημαντικό να σημειώσουμε ότι η σύγκριση κλειδιών είναι διαφορετική στο εσωτερικό της <code class="highlighter-rouge">ordered_set</code>.  Τα κλειδιά δεν χρειάζεται να ταιριάζουν, αρκεί να συγκρίνονται ως όμοια.  Για παράδειγμα τα 1 και 1.0 θεωρούνται ίσα.</li>
  <li><code class="highlighter-rouge">bag</code> — Πολλά αντικείμενα ανά κλειδί αλλά μόνο μια υπόσταση κάθε αντικειμένου ανά κλειδί.</li>
  <li><code class="highlighter-rouge">duplicate_bag</code> — Πολλά αντικείμενα ανά κλειδί, με τα διπλότυπα να επιτρέπονται.</li>
</ul>

<h3 id="section-3">Χειριστές Πρόσβασης</h3>

<p>Οι χειριστές πρόσβασης στην ETS είναι παρόμοιοι με τους χεριστές πρσόβασης μέσα στις ενότητες:</p>

<ul>
  <li><code class="highlighter-rouge">public</code> — Ανάγνωση/Εγγραφή διαθέσιμη σε όλες τις διεργασίες.</li>
  <li><code class="highlighter-rouge">protected</code> — Ανάγνωση διαθέσιμη σε όλες τις διεργασίες.  Εγγραφή μόνο από την διεργασία ιδιοκτήτη.  Αυτή είναι η προκαθορισμένη επιλογή.</li>
  <li><code class="highlighter-rouge">private</code> — Ανάγνωση/Εγγραφή περιορισμένη στην διεργασία ιδιοκτήτη.</li>
</ul>

<h2 id="section-4">Εισαγωγή Δεδομένων</h2>

<p>Η ETS δεν έχει σχήμα.  Ο μόνος περιορισμός είναι ότι τα δεδομένα πρέπει να αποθηκεύονται σαν μια τούπλα της οποίας το πρώτο στοιχείο είναι το κλειδί.  Για να προσθέσουμε νέα δεδομένα μπορούμε να χρησιμοποιήσουμε την <code class="highlighter-rouge">insert/2</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="p">{</span><span class="sd">"</span><span class="s2">doomspork"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Java"</span><span class="p">]})</span>
<span class="no">true</span>
</code></pre>
</div>

<p>Όταν χρησιμοποιούμε την <code class="highlighter-rouge">insert/2</code> με ένα <code class="highlighter-rouge">set</code> ή με ένα <code class="highlighter-rouge">ordered_set</code> τα υπάρχοντα δεδομένα αντικαθίστανται.  Για να το αποφύγουμε αυτό υπάρχει η <code class="highlighter-rouge">insert_new/2</code> η οποία επιστρέφει <code class="highlighter-rouge">false/2</code> για υπάρχοντα κλειδιά:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">insert_new</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="p">{</span><span class="sd">"</span><span class="s2">doomspork"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Java"</span><span class="p">]})</span>
<span class="no">false</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">insert_new</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="p">{</span><span class="sd">"</span><span class="s2">3100"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">JavaScript"</span><span class="p">]})</span>
<span class="no">true</span>
</code></pre>
</div>

<h2 id="section-5">Ανάκτηση Δεδομένων</h2>

<p>Η ETS μας προσφέρει μερικούς βολικούς και εύκαμπτους τρόπους να ανακτήσουμε αποθηκευμένα δεδομένα.  Θα δούμε πως να ανακτούμε δεδομένα με το κλειδί και μέσω διαφορετικών μορφών αντιπαραβολής προτύπων.</p>

<p>Η πιο αποτελεσματική και ιδανική μέθοδος ανάκτησης είναι με αναζήτηση κλειδιού.  Παρ’ ότι χρήσιμο, το ταίριασμα περνάει όλο τον πίνακα και θα πρέπει να χρησιμοποιείται με φειδώ ειδικά για πολύ μεγάλα σετ δεδομένων.</p>

<h3 id="section-6">Αναζήτηση Κλειδιού</h3>

<p>Δεδομένου ενός κλειδιού, μπορούμε να χρησιμοποιήσουμε την <code class="highlighter-rouge">lookup/2</code> για να ανακτήσουμε όλες τις εγγραφές με αυτό το κλειδί:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="sd">"</span><span class="s2">doomspork"</span><span class="p">)</span>
<span class="p">[{</span><span class="sd">"</span><span class="s2">doomspork"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Java"</span><span class="p">]}]</span>
</code></pre>
</div>

<h3 id="section-7">Απλές Αντιπαραβολές</h3>

<p>Η ETS χτίστηκε για την Erlang, έτσι πρέπει να ξέρετε ότι η αντιπαραβολή μεταβλητών μπορεί να είναι <em>λιγάκι</em> άχαρη.</p>

<p>Για να ορίσουμε μια μεταβλητή στην αντιπαραβολή μας χρησιμοποιούμε τα άτομα <code class="highlighter-rouge">:"$1"</code>, <code class="highlighter-rouge">:"$2"</code>, <code class="highlighter-rouge">:"$3"</code> και ούτω καθεξής.  Ο αριθμός μεταβλητής αντικατοπτρίζει την θέση αποτελέσματος και όχι την θέση αντιπαραβολής.  Για τιμές που δεν μας ενδιαφέρουν, χρησιμοποιούμε την μεταβλητή <code class="highlighter-rouge">:"_"</code>.</p>

<p>Οι τιμές μπορούν επίσης να χρησιμοποιηθούν σε αντιπαραβολές, αλλά μόνο οι μεταβλητές θα επιστραφούν σαν μέρος του αποτελέσματός μας.  Ας τα βάλουμε όλα μαζί και να δούμε πως λειτουργεί:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="p">{</span><span class="ss">:"$1"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">,</span> <span class="ss">:"_"</span><span class="p">})</span>
<span class="p">[[</span><span class="sd">"</span><span class="s2">doomspork"</span><span class="p">]]</span>
</code></pre>
</div>

<p>Ας δούμε ένα άλλο παράδειγμα για να καταλάβουμε πως οι μεταβλητές επηρεάζουν την σειρά της λίστας αποτελεσμάτων:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="p">{</span><span class="ss">:"$99"</span><span class="p">,</span> <span class="ss">:"$1"</span><span class="p">,</span> <span class="ss">:"$3"</span><span class="p">})</span>
<span class="p">[[</span><span class="sd">"</span><span class="s2">Sean"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Java"</span><span class="p">],</span> <span class="sd">"</span><span class="s2">doomspork"</span><span class="p">],</span>
 <span class="p">[</span><span class="sd">"</span><span class="s2">"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">JavaScript"</span><span class="p">],</span> <span class="sd">"</span><span class="s2">3100"</span><span class="p">]]</span>
</code></pre>
</div>

<p>Τι γίνεται αν θέλουμε το αρχικό αντικείμενό μας και όχι μια λίστα;  Μπορούμε να χρησιμοποιήσουμε την <code class="highlighter-rouge">match_object/2</code>, η οποία άσχετα από τις μεταβλητές επιστρέφει ολόκληρο το αντικείμενό μας:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">match_object</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="p">{</span><span class="ss">:"$1"</span><span class="p">,</span> <span class="ss">:"_"</span><span class="p">,</span> <span class="ss">:"$3"</span><span class="p">})</span>
<span class="p">[{</span><span class="sd">"</span><span class="s2">doomspork"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Java"</span><span class="p">]},</span>
 <span class="p">{</span><span class="sd">"</span><span class="s2">3100"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">JavaScript"</span><span class="p">]}]</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">match_object</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="p">{</span><span class="ss">:"_"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">,</span> <span class="ss">:"_"</span><span class="p">})</span>
<span class="p">[{</span><span class="sd">"</span><span class="s2">doomspork"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Java"</span><span class="p">]}]</span>
</code></pre>
</div>

<h3 id="section-8">Προχωρημένη Αναζήτηση</h3>

<p>Μάθαμε για απλές περιπτώσεις αντιπαραβολής αλλά τι γίνεται αν θέλουμε κάτι πιο κοντινό σε ερώτημα SQL;  Ευτυχώς μας γίνεται διαθέσιμο ένα πιο εύρωστο συντακτικο.  Για να αναζητήσουμε δεδομένα με την <code class="highlighter-rouge">select/2</code> χρειάζεται να δημιουργήσουμε μια λίστα από τούπλες με τρία ορίσματα.  Αυτές οι τούπλες αναπαριστούν το πρότυπό μας, μηδέν ή περισσότερους προστάτες και μια μοφή τιμής επιστροφής.</p>

<p>Οι αντιπαραβολές μεταβλητών και δύο νέες μεταβλητές, οι <code class="highlighter-rouge">:"$$"</code> και <code class="highlighter-rouge">:"$_"</code>, μπορούν να χρησιμοποιηθούν για να δημιουργήσουν την τιμή επιστροφής.  Αυτές οι νέες μεταβλητές είναι συντομεύσεις για τη μορφή αποτελέσματος.  Η <code class="highlighter-rouge">:"$$"</code> δέχεται αποτελέσματα σαν λίστες και η <code class="highlighter-rouge">:"$_"</code> δέχεται τα αρχικά αντικείμενα δεδομένων.</p>

<p>Ας πάρουμε ένα από τα προηγούμενα παραδείγματα της <code class="highlighter-rouge">match/2</code> και να το μετατρέψουμε σε μια <code class="highlighter-rouge">select/2</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">match_object</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="p">{</span><span class="ss">:"$1"</span><span class="p">,</span> <span class="ss">:"_"</span><span class="p">,</span> <span class="ss">:"$3"</span><span class="p">})</span>
<span class="p">[{</span><span class="sd">"</span><span class="s2">doomspork"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Java"</span><span class="p">]},</span>
 <span class="p">{</span><span class="sd">"</span><span class="s2">3100"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">JavaScript"</span><span class="p">]}]</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="p">[{{</span><span class="ss">:"$1"</span><span class="p">,</span> <span class="ss">:"_"</span><span class="p">,</span> <span class="ss">:"$3"</span><span class="p">},</span> <span class="p">[],</span> <span class="p">[</span><span class="ss">:"$_"</span><span class="p">]}])</span>
<span class="p">[{</span><span class="sd">"</span><span class="s2">doomspork"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Java"</span><span class="p">]},</span>
 <span class="p">{</span><span class="sd">"</span><span class="s2">spork"</span><span class="p">,</span> <span class="m">30</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">elixir"</span><span class="p">]}]</span>
</code></pre>
</div>

<p>Παρόλο που η <code class="highlighter-rouge">select/2</code> επιτρέπει για καλύτερο έλεγχο πάνω στο τι και πως θα ανακτήσουμε εγγραφές, το συντακτικό είναι αρκετά εχθρικό και μόνο χειρότερο θα γίνει.  Για να το διαχειριστούμε η ενότητα ETS περιλαμβάνει την <code class="highlighter-rouge">fun2ms/1</code> η οποία μετατρέπει τις συναρτήσεις σε match_specs.  Με την <code class="highlighter-rouge">fun2ms/1</code> μπορούμε να δημιουργήσουμε ερωτήματα χρησιμοποιώντας το οικείο συντακτικό συναρτήσεων.</p>

<p>Ας χρησιμοποιήσουμε την <code class="highlighter-rouge">fun2ms/1</code> και την <code class="highlighter-rouge">select/2</code> για να βρούμε όλα τα ψευδώνυμα με περισσότερες από 2 γλώσσες:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="n">fun</span> <span class="o">=</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">fun2ms</span><span class="p">(</span><span class="k">fn</span> <span class="p">{</span><span class="n">username</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">langs</span><span class="p">}</span> <span class="ow">when</span> <span class="n">length</span><span class="p">(</span><span class="n">langs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="m">2</span> <span class="o">-&gt;</span> <span class="n">username</span> <span class="k">end</span><span class="p">)</span>
<span class="p">[{{</span><span class="ss">:"$1"</span><span class="p">,</span> <span class="ss">:"_"</span><span class="p">,</span> <span class="ss">:"$2"</span><span class="p">},</span> <span class="p">[{</span><span class="ss">:&gt;</span><span class="p">,</span> <span class="p">{</span><span class="ss">:length</span><span class="p">,</span> <span class="ss">:"$2"</span><span class="p">},</span> <span class="m">2</span><span class="p">}],</span> <span class="p">[</span><span class="ss">:"$1"</span><span class="p">]}]</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="n">fun</span><span class="p">)</span>
<span class="p">[</span><span class="sd">"</span><span class="s2">doomspork"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">3100"</span><span class="p">]</span>
</code></pre>
</div>

<p>Θέλετε να μάθετε περισσότερα για τους προσδιορισμούς αντιπαραβολών;  Ελέγξτε την επίσημη τεκμηρίωση της Erlang για την <a href="http://www.erlang.org/doc/apps/erts/match_spec.html">match_spec</a>.</p>

<h2 id="section-9">Διαγραφή Δεδομένων</h2>

<h3 id="section-10">Αφαίρεση Εγγραφών</h3>

<p>Οι όροι διαγραφής είναι αρκετά ευθείς όπως η <code class="highlighter-rouge">insert/2</code> και η <code class="highlighter-rouge">lookup/2</code>.  Με την <code class="highlighter-rouge">delete/2</code> χρειαζόμαστε μόνο τον πίνακα μας και το κλειδί.   Αυτή διαγράφει το κλειδί και τις τιμές του:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">,</span> <span class="sd">"</span><span class="s2">doomspork"</span><span class="p">)</span>
<span class="no">true</span>
</code></pre>
</div>

<h3 id="section-11">Αφαίρεση Πινάκων</h3>

<p>Οι πίνακες ETS δεν καθαρίζονται εκτός και αν ο γονέας τερματιστεί.  Μερικές φορές μπορεί να είναι χρήσιμο να διαγράψουμε έναν ολόκληρο πίνακα χωρίς να τερματίσουμε την διεργασία ιδιοκτήτη.  Για αυτό μπορούμε να χρησιμοποιήσουμε την <code class="highlighter-rouge">delete/1</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="ss">:user_lookup</span><span class="p">)</span>
<span class="no">true</span>
</code></pre>
</div>

<h2 id="ets">Παράδειγμα χρήσης της ETS</h2>

<p>Δεδομένου όσα μάθαμε πιο πάνω, ας τα βάλουμε όλα μαζί και να χτίσουμε μια απλή cache για ακριβές εκτελέσεις.  Θα υλοποιήσουμε τη συνάρτηση <code class="highlighter-rouge">get/4</code> που θα δέχεται μια ενότητα, μια συνάρτηση, ορίσματα και επιλογές.  Για τώρα η μόνη επιλογή για την οποία θα ανησυχήσουμε θα είναι η <code class="highlighter-rouge">:ttl</code>.</p>

<p>Για αυτό το παράδειγμα θα υποθέσουμε ότι ο πίνακας ETS έχει δημιουργηθεί σαν μέρος μιας άλλης διαδικασίας, όπως ένoς επιτηρητή:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">SimpleCache</span> <span class="k">do</span>
  <span class="nv">@moduledoc</span> <span class="sd">"""
  Μια απλή cache βασισμένη στην ETS για ακριβές κλήσεις συναρτήσεων.
  """</span>

  <span class="nv">@doc</span> <span class="sd">"""
  Ανακτήστε μια προσωρινά αποθηκευμένη τιμή ή εφαρμόστε την δοθείσα συνάρτηση
  αποθηκεύοντας και επιστρέφοντας το αποτέλεσμα.
  """</span>
  <span class="k">def</span> <span class="n">get</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">fun</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">opts</span> <span class="p">\\</span> <span class="p">[])</span> <span class="k">do</span>
    <span class="k">case</span> <span class="n">lookup</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">fun</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="k">do</span>
      <span class="no">nil</span> <span class="o">-&gt;</span>
        <span class="n">ttl</span> <span class="o">=</span> <span class="no">Keyword</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">opts</span><span class="p">,</span> <span class="ss">:ttl</span><span class="p">,</span> <span class="m">3600</span><span class="p">)</span>
        <span class="n">cache_apply</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">fun</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">ttl</span><span class="p">)</span>
      <span class="n">result</span> <span class="o">-&gt;</span> <span class="n">result</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="nv">@doc</span> <span class="sd">"""
  Αναζητήστε ένα προσωρινά αποθηκευμένο αποτέλεσμα και ελέγξτε τη φρεσκάδα του
  """</span>
  <span class="k">defp</span> <span class="n">lookup</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">fun</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="k">do</span>
    <span class="k">case</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="ss">:simple_cache</span><span class="p">,</span> <span class="p">[</span><span class="n">mod</span><span class="p">,</span> <span class="n">fun</span><span class="p">,</span> <span class="n">args</span><span class="p">])</span> <span class="k">do</span>
      <span class="p">[</span><span class="n">result</span><span class="o">|</span><span class="n">_</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">check_freshness</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
      <span class="p">[]</span> <span class="o">-&gt;</span> <span class="no">nil</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="nv">@doc</span> <span class="sd">"""
  Συγκρίνετε τη λήξη του αποτελέσματος με την τρέχουσα ώρα συστήματος.
  """</span>
  <span class="k">defp</span> <span class="n">check_freshness</span><span class="p">({</span><span class="n">mfa</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">expiration</span><span class="p">})</span> <span class="k">do</span>
    <span class="k">cond</span> <span class="k">do</span>
      <span class="n">expiration</span> <span class="o">&gt;</span> <span class="ss">:os</span><span class="o">.</span><span class="n">system_time</span><span class="p">(</span><span class="ss">:seconds</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">result</span>
      <span class="ss">:else</span> <span class="o">-&gt;</span> <span class="no">nil</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="nv">@doc</span> <span class="sd">"""
  Εφαρμόστε τη συνάρτηση, υπολογίστε τη λήξη, αποθηκεύστε προσωρινά το αποτέλεσμα
  """</span>
  <span class="k">defp</span> <span class="n">cache_apply</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">fun</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">ttl</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">apply</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">fun</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
    <span class="n">expiration</span> <span class="o">=</span> <span class="ss">:os</span><span class="o">.</span><span class="n">system_time</span><span class="p">(</span><span class="ss">:seconds</span><span class="p">)</span> <span class="o">+</span> <span class="n">ttl</span>
    <span class="ss">:ets</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="ss">:simple_cache</span><span class="p">,</span> <span class="p">{[</span><span class="n">mod</span><span class="p">,</span> <span class="n">fun</span><span class="p">,</span> <span class="n">args</span><span class="p">],</span> <span class="n">result</span><span class="p">,</span> <span class="n">expiration</span><span class="p">})</span>
    <span class="n">result</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Για να επιδείξουμε την cache, θα χρησιμοποιήσουμε μια συνάρτηση που επιστρέφει την τιμή συστήματος και μια TTL 10 δευτερολέπτων.  Όπως θα δείτε το παράδειγμα παρακάτω, δεχόμαστε το προσωρινά αποθηκευμένο αποτέλεσμα μέχρι η τιμή να λήξει:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">ExampleApp</span> <span class="k">do</span>
  <span class="k">def</span> <span class="n">test</span> <span class="k">do</span>
    <span class="ss">:os</span><span class="o">.</span><span class="n">system_time</span><span class="p">(</span><span class="ss">:seconds</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:simple_cache</span><span class="p">,</span> <span class="p">[</span><span class="ss">:named_table</span><span class="p">])</span>
<span class="ss">:simple_cache</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="no">ExampleApp</span><span class="o">.</span><span class="n">test</span>
<span class="m">1451089115</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="no">SimpleCache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="no">ExampleApp</span><span class="p">,</span> <span class="ss">:test</span><span class="p">,</span> <span class="p">[],</span> <span class="ss">ttl:</span> <span class="m">10</span><span class="p">)</span>
<span class="m">1451089119</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="no">ExampleApp</span><span class="o">.</span><span class="n">test</span>
<span class="m">1451089123</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="no">ExampleApp</span><span class="o">.</span><span class="n">test</span>
<span class="m">1451089127</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="no">SimpleCache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="no">ExampleApp</span><span class="p">,</span> <span class="ss">:test</span><span class="p">,</span> <span class="p">[],</span> <span class="ss">ttl:</span> <span class="m">10</span><span class="p">)</span>
<span class="m">1451089119</span>
</code></pre>
</div>

<p>Μετά από 10 δευτερόλεπτα αν δοκιμάσουμε ξανά θα πρέπει να πάρουμε ένα φρέσκο αποτέλεσμα:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="no">ExampleApp</span><span class="o">.</span><span class="n">test</span>
<span class="m">1451089131</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="no">SimpleCache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="no">ExampleApp</span><span class="p">,</span> <span class="ss">:test</span><span class="p">,</span> <span class="p">[],</span> <span class="ss">ttl:</span> <span class="m">10</span><span class="p">)</span>
<span class="m">1451089134</span>
</code></pre>
</div>

<p>Όπως θα δείτε είμαστε σε θέση να υλοποιήσουμε μια κλιμακούμενη και γρήγορη προσωρινή μνήμη χωρίς καμμία εξωτερική εξάρτηση και αυτή είναι μόνο μια από τις πολλές χρήσεις της ETS.</p>

<h2 id="ets---">ETS βασισμένη στο δίσκο</h2>

<p>Τώρα ξέρουμε ότι η ETS είναι για αποθήκευση στη μνήμη αλλά τι γίνεται αν θέλουμε αποθήκευση βασισμένη στο δίσκο;  Για αυτό έχουμε την Disk Based Term Storage, ή εν συντομία DETS.  Τα API των ETS και DETS είναι ανταλλάξιμα με την εξαίρεση του πως δημιουργούνται οι πίνακες.  Η DETS επαφίεται στην <code class="highlighter-rouge">open_file/2</code> και δεν χρειάζεται την επιλογή <code class="highlighter-rouge">:named_table</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">table</span><span class="p">}</span> <span class="o">=</span> <span class="ss">:dets</span><span class="o">.</span><span class="n">open_file</span><span class="p">(</span><span class="ss">:disk_storage</span><span class="p">,</span> <span class="p">[</span><span class="ss">type:</span> <span class="ss">:set</span><span class="p">])</span>
<span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="ss">:disk_storage</span><span class="p">}</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:dets</span><span class="o">.</span><span class="n">insert_new</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="p">{</span><span class="sd">"</span><span class="s2">doomspork"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Java"</span><span class="p">]})</span>
<span class="no">true</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="n">select_all</span> <span class="o">=</span> <span class="ss">:ets</span><span class="o">.</span><span class="n">fun2ms</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="nv">&amp;1</span><span class="p">))</span>
<span class="p">[{</span><span class="ss">:"$1"</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[</span><span class="ss">:"$1"</span><span class="p">]}]</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="ss">:dets</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">select_all</span><span class="p">)</span>
<span class="p">[{</span><span class="sd">"</span><span class="s2">doomspork"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Sean"</span><span class="p">,</span> <span class="p">[</span><span class="sd">"</span><span class="s2">Elixir"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Ruby"</span><span class="p">,</span> <span class="sd">"</span><span class="s2">Java"</span><span class="p">]}]</span>
</code></pre>
</div>

<p>If you exit <code class="highlighter-rouge">iex</code> and look in your local directory, you’ll see a new file <code class="highlighter-rouge">disk_storage</code>:<br />
Αν βγείτε από το <code class="highlighter-rouge">iex</code> και κοιτάξετε στον τοπικό σας φάκελο, θα δείτε ένα νέο αρχειο <code class="highlighter-rouge">disk_storage</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ls | grep -c disk_storage
1
</code></pre>
</div>

<p>Ένα τελευταίο πράγμα που πρέπει να σημειώσουμε είναι ότι η DETS δεν υποστηρίζει τα <code class="highlighter-rouge">ordered_set</code> όπως η ETS, μόνο τα <code class="highlighter-rouge">set</code>, <code class="highlighter-rouge">bag</code> και <code class="highlighter-rouge">duplicate_bag</code>.</p>


  

<hr />
<h3 id="social">
  
    Share This Page
  
</h3>
<div class="social__container">
  <div class="social__item">
    <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https://elixirschool.com/gr/lessons/specifics/ets/&title=Erlang Term Storage (ETS)&summary=description&source=https://elixirschool.com" class="social__icon--linkedin"><i class="icon--linkedin"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://twitter.com/intent/tweet?url=https://elixirschool.com/gr/lessons/specifics/ets/&via=elixirschool&text=ElixirSchool: Erlang Term Storage (ETS)&hashtags=learnelixir%2Celixirlang&" class="social__icon--twitter"><i class="icon--twitter"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://plus.google.com/share?url=https://elixirschool.com/gr/lessons/specifics/ets/" class="social__icon--googleplus"><i class="icon--googleplus"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://elixirschool.com/gr/lessons/specifics/ets/" class="social__icon--facebook"><i class="icon--facebook"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.pinterest.com/pin/create/link/?url=https://elixirschool.com/gr/lessons/specifics/ets/&media=https://elixirschool.com/assets/fb_share.jpg&description=ElixirSchool: Erlang Term Storage (ETS)" class="social__icon--pinterest"><i class="icon--pinterest"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://www.evernote.com/noteit.action?url=https://elixirschool.com/gr/lessons/specifics/ets/&title=ElixirSchool: Erlang Term Storage (ETS)&suggestTags=elixir,programming" class="social__icon--evernote"><i class="icon--evernote"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="https://vk.com/share.php?url=https://elixirschool.com/gr/lessons/specifics/ets/&title=ElixirSchool: Erlang Term Storage (ETS)&description=Check out 'Erlang Term Storage (ETS)' on ElixirSchool" class="social__icon--vk" style="margin-left: 2px;"><i class="icon--vk"></i></a>
  </div>
  <div class="social__item">
    <a target="_blank" href="mailto:?&subject=ElixirSchool: Erlang Term Storage (ETS)&body=Check out 'Erlang Term Storage (ETS)' on ElixirSchool%0D%0A%0D%0Ahttps://elixirschool.com/gr/lessons/specifics/ets/" class="social__icon--email"><i class="icon--email"></i></a>
  </div>
  <div class="social__item">
    <a href="javascript:window.print()" class="social__icon--print"><i class="icon--print"></i></a>
  </div>
</div>
</div>
    </div>
  <script type="text/javascript" src="/assets/app.js"></script>
  </body>
</html>
